#:kivy 2.3.1
<MoodSelect>:
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1  # สีขาวเป็นพื้นฐาน
        Rectangle:
            source: "Images/background.png"
            size: self.size
            pos: self.pos

    text_input: text_input_field
    orientation: "vertical"
    spacing: 20
    padding: 50

    MDCard:
        background_color: 1,1,1,1
        padding: 20

        AnchorLayout:  # ใช้ AnchorLayout เพื่อให้ GridLayout อยู่ตรงกลาง
            anchor_x: "center"
            anchor_y: "center"

            GridLayout:
                cols: 1
                spacing: 20
                size_hint: None, None
                width: self.minimum_width  # ปรับขนาดให้พอดีเนื้อหา
                height: self.minimum_height
                pos_hint: {"center_x": 0.5, "center_y": 0.5}

                FitImage:
                    source: "Images/disk.gif"
                    size_hint: None, None
                    size: 450, 450
                    keep_ratio: True
                    allow_stretch: True

                Label:
                    id: track_name_label
                    text: "Name"
                    size_hint_y: None
                    height: 60
                    font_size: 40
                    halign: "center"
                    valign: "middle"
                    color: 0.996, 0.412, 0.408, 1


    Label:
        text: "What’s your mood like today?"
        size_hint_y: None
        height: 60
        font_size: 50
        spacing: 10
        color: 0, 0, 0, 0 
        padding: [20,20]
        color: 0.996, 0.412, 0.408, 1

    Widget:
        size_hint_y: None
        height: 20  

    BoxLayout:
        id: emoji_grid
        spacing: 10
        size_hint_y: None 
        height: 80
        
        BoxLayout:
            orientation: 'vertical'
            spacing: 5  # ระยะห่างระหว่างปุ่มกับข้อความ
            MoodButton:
                background_normal: 'Images/happy.png'
                on_press: root.emoji_select('happy')
            Label:
                font_size: 14  
                color: 1, 1, 1, 1  # สีขาว
                size_hint_y: None
                height: 20

        BoxLayout:
            orientation: 'vertical'
            spacing: 5  # ระยะห่างระหว่างปุ่มกับข้อความ
            MoodButton:
                background_normal: 'Images/sad.png'
                on_press: root.emoji_select('sad')
            Label:
                font_size: 14  
                color: 1, 1, 1, 1  # สีขาว
                size_hint_y: None
                height: 20


        BoxLayout:
            orientation: 'vertical'
            spacing: 5  # ระยะห่างระหว่างปุ่มกับข้อความ
            MoodButton:
                background_normal: 'Images/angry.png'
                on_press: root.emoji_select('angry')
            Label:
                font_size: 14  
                color: 1, 1, 1, 1  # สีขาว
                size_hint_y: None
                height: 20


        BoxLayout:
            orientation: 'vertical'
            spacing: 5  # ระยะห่างระหว่างปุ่มกับข้อความ
            MoodButton:
                background_normal: 'Images/calm.png'
                on_press: root.emoji_select('calm')
            Label:
                font_size: 14  
                color: 1, 1, 1, 1  # สีขาว
                size_hint_y: None
                height: 20


        BoxLayout:
            orientation: 'vertical'
            spacing: 5  # ระยะห่างระหว่างปุ่มกับข้อความ
            MoodButton:
                background_normal: 'Images/excited.png'
                on_press: root.emoji_select('excited')
            Label:
                font_size: 14  
                color: 1, 1, 1, 1  # สีขาว
                size_hint_y: None
                height: 20


        BoxLayout:
            orientation: 'vertical'
            spacing: 5  # ระยะห่างระหว่างปุ่มกับข้อความ
            MoodButton:
                background_normal: 'Images/horny.png'
                on_press: root.emoji_select('horny')        
            Label:
                font_size: 14  
                color: 1, 1, 1, 1  # สีขาว
                size_hint_y: None
                height: 20

    MDTextField:
        id: text_input_field
        mode: "outlined"
        multiline: False
        size_hint_y: None
        height: 100
        hint_text: "Type a short description of your emotions..."
        
        md_bg_color: 0.992, 0.992, 0.996, 1  # สีพื้นหลัง (เทียบเท่า #FDFDFE)
        text_color: 0, 0, 0, 1  # สีข้อความ (ดำ)
        hint_text_color: 0.5, 0.5, 0.5, 1  # สีข้อความ Hint (เทา)
        
        padding: [10, 10, 10, 10]  # เพิ่ม padding ภายในช่องข้อความ
        
    
    MDButton:
        style: "elevated"
        pos_hint: {"center_x": .5, "center_y": .5}
        size_hint: None, None
        size: "300dp", "50dp"  # ปรับขนาดปุ่ม
        on_press: root.submit_mood()  # เพิ่มการทำงานเมื่อกดปุ่ม
        theme_text_color: "Custom"  # กำหนดให้ใช้สีข้อความแบบกำหนดเอง
        text_color: 0, 0, 0, 0  # สีข้อความขาว
        font_size: "18sp"  # ขนาดฟอนต์
        MDButtonText:
            text: "Get Music Recommendation"


# Custom button for mood emojis
<MoodButton@Button>:
    background_normal: ''
    background_color: 1, 1, 1, 1
    border: (0, 0, 0, 0)
    size_hint: (None, None)
    size: 80, 80

    # เพิ่มเอฟเฟกต์เมื่อกดปุ่ม
    
    background_down: self.background_normal
    background_color_down: 0.8, 0.8, 0.8, 1 

    # เพิ่มเอฟเฟกต์การเปลี่ยนสีเมื่อเมาส์ชี้
    canvas.before:
        Color:
            rgba: 0.9, 0.9, 0.9, 1 if self.state == 'normal' else 0.7, 0.7, 0.7, 1
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [10, 10, 10, 10]  # ทำมุมโค้ง
            
    # เพิ่มเงา
    canvas.before:
        Color:
            rgba: 0.5, 0.5, 0.5, 0.2
        RoundedRectangle:
            pos: self.x + 2, self.y - 2
            size: self.size
            radius: [10, 10, 10, 10]

